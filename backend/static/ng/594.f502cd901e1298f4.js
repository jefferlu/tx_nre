"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[594],{8594:(Oe,I,l)=>{l.r(I),l.d(I,{SettingsModule:()=>qe});var N=l(2480),x=l(1728),f=l(9114),y=l(430),C=l(8097),e=l(2223),b=l(1217),S=(l(706),l(1692),l(418),l(9401)),g=l(4755);let ee=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[b.BQ,g.ez,b.si,b.BQ]}),i})();var w=l(787),te=l(877),T=l(2214),oe=l(7775),ie=l(4466),A=l(7579),Z=l(2722),ae=l(4880),re=l(4709);function ne(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",27)(2,"div",13),e._uU(3),e.qZA(),e.TgZ(4,"div",28),e._uU(5),e.qZA()(),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("value",t.value),e.xp6(2),e.Oqu(t.label),e.xp6(2),e.Oqu(t.description)}}function ce(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",8)(2,"div",9)(3,"div",10),e.ynx(4),e.TgZ(5,"div",11),e._uU(6),e.qZA(),e.BQk(),e.qZA(),e.TgZ(7,"div",12)(8,"div",13),e._uU(9),e.qZA(),e.TgZ(10,"div",14),e._uU(11),e.qZA()()(),e.TgZ(12,"div",15)(13,"div",16)(14,"mat-form-field",17)(15,"mat-select",18,19)(17,"mat-select-trigger",20)(18,"span"),e._uU(19,"Role:"),e.qZA(),e.TgZ(20,"span",21),e._uU(21),e.ALo(22,"titlecase"),e.qZA()(),e.YNc(23,ne,6,3,"ng-container",22),e.qZA()()(),e.TgZ(24,"div",23)(25,"button",24),e._UZ(26,"mat-icon",25),e.qZA(),e.TgZ(27,"button",24),e._UZ(28,"mat-icon",26),e.qZA()()()(),e.BQk()),2&i){const t=r.$implicit,o=e.MAs(16),a=e.oxw();e.xp6(6),e.hij(" ",t.name.charAt(0)," "),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Oqu(t.email),e.xp6(3),e.Q6J("subscriptSizing","dynamic"),e.xp6(1),e.Q6J("panelClass","h-auto max-h-none")("value",t.role),e.xp6(6),e.Oqu(e.lcZ(22,10,o.value)),e.xp6(2),e.Q6J("ngForOf",a.roles),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:pencil-alt"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash")}}let de=(()=>{class i{constructor(){}ngOnInit(){this.members=[{avatar:"assets/images/avatars/male-01.jpg",name:"Dejesus Michael",email:"dejesusmichael@mail.org",role:"admin"},{avatar:"assets/images/avatars/male-03.jpg",name:"Mclaughlin Steele",email:"mclaughlinsteele@mail.me",role:"admin"},{avatar:"assets/images/avatars/female-02.jpg",name:"Laverne Dodson",email:"lavernedodson@mail.ca",role:"write"},{avatar:"assets/images/avatars/female-03.jpg",name:"Trudy Berg",email:"trudyberg@mail.us",role:"read"},{avatar:"assets/images/avatars/male-07.jpg",name:"Lamb Underwood",email:"lambunderwood@mail.me",role:"read"},{avatar:"assets/images/avatars/male-08.jpg",name:"Mcleod Wagner",email:"mcleodwagner@mail.biz",role:"read"},{avatar:"assets/images/avatars/female-07.jpg",name:"Shannon Kennedy",email:"shannonkennedy@mail.ca",role:"read"}],this.roles=[{label:"User",value:"user"},{label:"Admin",value:"admin"}]}trackByFn(t,o){return o.id||t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["settings-account"]],decls:10,vars:5,consts:[[1,"w-full","max-w-3xl"],[1,"w-full"],[1,"w-full","fuse-mat-dense",3,"subscriptSizing"],["matInput","",3,"placeholder"],["mat-icon-button","","matSuffix",""],[1,"icon-size-5",3,"svgIcon"],[1,"flex","flex-col","mt-8","divide-y","border-t","border-b"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-col","sm:flex-row","sm:items-center","py-6"],[1,"flex","items-center"],[1,"flex","flex-0","items-center","justify-center","w-10","h-10","rounded-full","overflow-hidden"],[1,"flex","items-center","justify-center","w-full","h-full","rounded-full","text-lg","uppercase","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"ml-4"],[1,"font-medium"],[1,"text-secondary"],[1,"flex","items-center","mt-4","sm:mt-0","sm:ml-auto"],[1,"order-2","sm:order-1","ml-4","sm:ml-0"],[1,"fuse-mat-dense","w-32",3,"subscriptSizing"],["disableOptionCentering","",3,"panelClass","value"],["roleSelect","matSelect"],[1,"text-md"],[1,"ml-1","font-medium"],[4,"ngFor","ngForOf"],[1,"order-1","sm:order-2","sm:ml-3"],["mat-icon-button",""],[1,"text-hint",3,"svgIcon"],[1,"text-red-400",3,"svgIcon"],[1,"h-auto","py-4","leading-none",3,"value"],[1,"mt-1.5","text-sm","whitespace-normal","leading-normal","text-secondary"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Add team members"),e.qZA(),e._UZ(5,"input",3),e.TgZ(6,"button",4),e._UZ(7,"mat-icon",5),e.qZA()()(),e.TgZ(8,"div",6),e.YNc(9,ce,29,12,"ng-container",7),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("subscriptSizing","dynamic"),e.xp6(3),e.Q6J("placeholder","Email address"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(2),e.Q6J("ngForOf",o.members)("ngForTrackBy",o.trackByFn))},dependencies:[x.RK,f.KE,f.hX,f.R9,y.Hw,C.Nt,w.gD,w.$L,b.ey,g.sg,g.rS],encapsulation:2,changeDetection:0}),i})();function O(i,r,t,o,a,d,n){try{var h=i[d](n),m=h.value}catch(c){return void t(c)}h.done?r(m):Promise.resolve(m).then(o,a)}function U(i){return function(){var r=this,t=arguments;return new Promise(function(o,a){var d=i.apply(r,t);function n(m){O(d,o,a,n,h,"next",m)}function h(m){O(d,o,a,n,h,"throw",m)}n(void 0)})}}var D=l(4313),M=l(4327),Q=l(1683),J=l(3189),B=l(3332);function se(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",17),e._uU(2),e.qZA(),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function le(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSave())}),e._UZ(1,"mat-icon",18),e.TgZ(2,"span",9),e._uU(3,"Save"),e.qZA()()}2&i&&e.Q6J("color","basic")}function me(i,r){if(1&i&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.Q6J("rowSpan",null==t.test_items?null:t.test_items.length),e.xp6(1),e.Oqu(t.name)}}function ue(i,r){1&i&&(e.ynx(0),e._UZ(1,"td"),e.BQk())}function pe(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"td",20),e._uU(2),e.qZA(),e.YNc(3,ue,2,0,"ng-container",16),e.BQk()),2&i){const t=e.oxw().$implicit,o=e.oxw().$implicit;e.xp6(2),e.Oqu(t.amount),e.xp6(1),e.Q6J("ngIf",1==o.fee.length)}}function _e(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"td",20),e._uU(2),e.qZA(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.amount)}}function he(i,r){if(1&i&&(e.ynx(0),e._UZ(1,"td"),e.TgZ(2,"td",20),e._uU(3),e.qZA(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.amount)}}function ge(i,r){if(1&i&&(e.ynx(0),e.YNc(1,pe,4,2,"ng-container",16),e.YNc(2,_e,3,1,"ng-container",16),e.YNc(3,he,4,1,"ng-container",16),e.BQk()),2&i){const t=r.$implicit,o=r.index;e.xp6(1),e.Q6J("ngIf","2K"===t.chamber&&0==o),e.xp6(1),e.Q6J("ngIf","WALKIN"===t.chamber&&1==o),e.xp6(1),e.Q6J("ngIf","WALKIN"===t.chamber&&0==o)}}function fe(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"tr"),e.YNc(2,me,2,2,"td",19),e.TgZ(3,"td",20),e._uU(4),e.qZA(),e.TgZ(5,"td",20),e._uU(6),e.qZA(),e.YNc(7,ge,4,3,"ng-container",5),e.qZA(),e.BQk()),2&i){const t=r.$implicit,o=r.index;e.xp6(2),e.Q6J("ngIf",0==o),e.xp6(2),e.Oqu(t.item_name),e.xp6(2),e.Oqu(t.lab_location),e.xp6(1),e.Q6J("ngForOf",t.fee)}}function be(i,r){if(1&i&&(e.ynx(0),e.YNc(1,fe,8,4,"ng-container",5),e._UZ(2,"tr"),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.test_items)}}function ve(i,r){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,be,3,1,"ng-container",5),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==t.page.data?null:t.page.data.functions)}}let xe=(()=>{class i{constructor(t,o,a,d){this._changeDetectorRef=t,this._fuseConfirmationService=o,this._alert=a,this._settingService=d,this._unsubscribeAll=new A.x,this.existingItems=null,this.currentYear=(new Date).getFullYear(),this.page={customers:null,customer:null,data:null}}ngOnInit(){this._settingService.customers$.pipe((0,Z.R)(this._unsubscribeAll)).subscribe(t=>{t&&t.length>0&&(this.page.customers=t,this.page.customer=t[0].id,this.page.data=JSON.parse(JSON.stringify(t[0])),this._changeDetectorRef.markForCheck())})}onSelectionChange(t){this.page.data=JSON.parse(JSON.stringify(this.page.customers.find(o=>o.id===t)))}change(){}onImport(){const t=document.createElement("input");t.type="file",t.accept=".xlsx,.xls",t.click(),t.addEventListener("change",o=>{const a=o.target.files[0];a&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===a.type?this.readExcel(a):this._alert.open({type:"warn",message:"Please select a valid Excel file."})})}readExcel(t){var o=this;return U(function*(){try{const a=new D.Workbook;yield a.xlsx.load(t);let n=[];a.worksheets[0].eachRow((c,s)=>{const u=[];c.eachCell({includeEmpty:!0},(p,k)=>{let _=p.value;_&&_.richText&&(_=p.text),"string"==typeof _&&(_=_.replace(/\r\n$/,"").trim()),u.push(_)}),n.push(u)});const h=c=>n.every(s=>null===s[c]);if(n=n.map(c=>c.filter((s,u)=>!h(u))),0===n.length)return void o._alert.open({type:"warn",message:"The Excel has no data."});if("Reliability/S&V Test"===n[0][0])return void o._alert.open({type:"warn",message:"Cannot find customer."});if("Reliability/S&V Test"!==n[1][0])return void o._alert.open({type:"warn",duration:5,message:"The format of the Excel data is wrong, please confirm whether the correct template is used."});o.page.data={name:n[0][0],functions:[]};let m=[];for(let c=3;c<n.length;c++){const s=n[c];let u=o.page.data.functions.find(p=>p.name===s[0]);u?u.test_items.push({item_name:s[1],lab_location:s[2]?s[2].toUpperCase():null,chamber:s[3]?s[3].toUpperCase():"2K",fee:s[4]??0,order:c}):o.page.data.functions.push({name:s[0],test_items:[{item_name:s[1],lab_location:s[2]?s[2].toUpperCase():null,chamber:s[3]?s[3].toUpperCase():"2K",fee:s[4]??0,order:c}]}),m.push({no:s[1].split(" ")[0],item_name:s[1]})}o.existingItems=[],m.reduceRight((c,s)=>{let u=c.find(p=>p.no===s.no);if(u){let p=o.existingItems.find(k=>k.no===u.no);p?p.count++:o.existingItems.push({no:u.no,count:1})}else c.unshift(s);return c},[]),o.save(o.page.data)}catch{o._alert.open({type:"warn",duration:5,message:"The format of the Excel data is wrong, please confirm whether the correct template is used."})}})()}onSave(){this.save(this.page.data)}save(t){this._settingService.saveCustomers(t).subscribe({next:o=>{let a=o.data;console.log(o.not_exist_items);let d=null;if(this.page.customers?d=this.page.customers.find(n=>n.name==a.name&&n.id==a.id):this.page.customers=[],d?Object.assign(d,a):(this.page.customers.push(a),d=this.page.customers[this.page.customers.length-1]),this._settingService.customers=this.page.customers,this.page.customer=d.id,this.page.data=a,this.existingItems.length>0){let n="";for(let m of this.existingItems)n+=`${m.no}&emsp; \u91cd\u8907: ${m.count}<br/>`;if(o.not_exist_items.length>0){n+="<br/>\u7121\u6cd5\u5c0d\u61c9\u9805\u76ee:<br/>";for(let m of o.not_exist_items)n+=`${m.no}\u3001`}this._fuseConfirmationService.open({title:"Info",message:n,icon:{color:"info"},actions:{confirm:{color:"primary",label:"Continue"},cancel:{show:!1}}}).afterClosed().subscribe(m=>{"confirmed"===m&&(this._alert.open({message:"Upload completed."}),this._changeDetectorRef.markForCheck())})}},error:o=>{console.log(o),this._fuseConfirmationService.open({title:"Error",message:JSON.stringify(o.message),actions:{confirm:{color:"warn",label:"OK"},cancel:{show:!1}}})}})}onDownload(){const t="nre_3rd_fee_template.xlsx";fetch("assets/excel/"+t).then(a=>a.blob()).then(a=>{M.saveAs(a,t)})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(Q.R),e.Y36(J.c),e.Y36(B.g))},i.\u0275cmp=e.Xpm({type:i,selectors:[["test-fee"]],decls:40,vars:10,consts:[[1,"w-full"],[1,"flex","flex-auto"],[1,"flex"],[1,"w-full","sm:w-40","fuse-mat-dense"],[3,"placeholder","value","valueChange","selectionChange"],[4,"ngFor","ngForOf"],["matPrefix","","fontSet","material-icons-outlined"],["mat-flat-button","",1,"ml-3",3,"color","click"],[1,"icon-size-5","text-black",3,"svgIcon"],[1,"ml-2","mr-1"],[1,"ml-auto"],["class","ml-3","mat-flat-button","",3,"color","click",4,"ngIf"],[1,"fee-table"],["colspan","5"],["rowspan","2"],["colspan","2"],[4,"ngIf"],[3,"value"],["fontIcon","save"],["class","text-center w-32",3,"rowSpan",4,"ngIf"],[1,"px-2"],[1,"text-center","w-32",3,"rowSpan"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-select",4),e.NdJ("valueChange",function(d){return o.page.customer=d})("selectionChange",function(d){return o.onSelectionChange(d.value)}),e.YNc(5,se,3,2,"ng-container",5),e.qZA(),e.TgZ(6,"mat-icon",6),e._uU(7,"supervisor_account"),e.qZA()()(),e.TgZ(8,"div")(9,"button",7),e.NdJ("click",function(){return o.onDownload()}),e._UZ(10,"mat-icon",8),e.TgZ(11,"span",9),e._uU(12,"Download Template"),e.qZA()()(),e.TgZ(13,"div",10)(14,"button",7),e.NdJ("click",function(){return o.onImport()}),e._UZ(15,"mat-icon",8),e.TgZ(16,"span",9),e._uU(17,"Import"),e.qZA()()(),e.TgZ(18,"div"),e.YNc(19,le,4,1,"button",11),e.qZA()(),e.TgZ(20,"table",12)(21,"thead")(22,"tr")(23,"th",13),e._uU(24,"Reliability/S&V Test"),e.qZA()(),e.TgZ(25,"tr")(26,"th",14),e._uU(27,"Function"),e.qZA(),e.TgZ(28,"th",14),e._uU(29,"Test Item"),e.qZA(),e.TgZ(30,"th",14),e._uU(31,"Lab Location"),e.qZA(),e.TgZ(32,"th",15),e._uU(33),e.qZA()(),e.TgZ(34,"tr")(35,"th"),e._uU(36,"2K"),e.qZA(),e.TgZ(37,"th"),e._uU(38,"Walk-in"),e.qZA()()(),e.YNc(39,ve,2,1,"tbody",16),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("placeholder","Customer")("value",o.page.customer),e.xp6(1),e.Q6J("ngForOf",o.page.customers),e.xp6(4),e.Q6J("color","basic"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:arrow-down-tray"),e.xp6(4),e.Q6J("color","basic"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:arrow-up-tray"),e.xp6(4),e.Q6J("ngIf",o.page.data&&o.page.data.length>0),e.xp6(14),e.Oqu(o.currentYear),e.xp6(6),e.Q6J("ngIf",o.page.data))},dependencies:[x.lW,f.KE,f.qo,y.Hw,w.gD,b.ey,g.sg,g.O5],styles:["table.fee-table{width:100%;table-layout:auto;border-left-width:1px;--tw-border-opacity: 1;border-color:rgb(100 116 139 / var(--tw-border-opacity));border-collapse:separate;border-spacing:0}table.fee-table thead{position:sticky;top:0;--tw-bg-opacity: 1;background-color:rgb(248 250 252 / var(--tw-bg-opacity))}table.fee-table th{border-right-width:1px;border-bottom-width:1px;--tw-border-opacity: 1;border-color:rgb(100 116 139 / var(--tw-border-opacity));padding:.125rem}table.fee-table tr:first-child th{border-top-width:1px}table.fee-table td{border-bottom-width:1px;border-right-width:1px;--tw-border-opacity: 1;border-color:rgb(100 116 139 / var(--tw-border-opacity));padding:.125rem}table.fee-table td .checkbox{margin-top:.25rem;height:1rem;width:1rem}table.fee-table .edit{width:4.5rem;white-space:nowrap;--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity));text-align:center}table.fee-table .edit input{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:center}table.fee-table .view{text-align:center}\n"],encapsulation:2,changeDetection:0}),i})();function ye(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",13),e._uU(3),e.qZA(),e.TgZ(4,"td",16),e._uU(5),e.qZA(),e.TgZ(6,"td",16),e._uU(7),e.qZA(),e.TgZ(8,"td",16),e._uU(9),e.qZA(),e.TgZ(10,"td",16),e._uU(11),e.qZA()(),e.BQk()),2&i){const t=r.$implicit,o=r.index;e.xp6(3),e.Oqu(o+1),e.xp6(2),e.Oqu(t.no),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.man_working_hours),e.xp6(2),e.Oqu(t.equip_working_hours)}}function ke(i,r){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,ye,12,5,"ng-container",15),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.page.data)}}let we=(()=>{class i{constructor(t,o,a,d,n){this._formBuilder=t,this._changeDetectorRef=o,this._fuseConfirmationService=a,this._settingsService=d,this._alert=n,this._unsubscribeAll=new A.x,this.elementPattern=null,this.page={items:null,data:null}}ngOnInit(){this._settingsService.items$.pipe((0,Z.R)(this._unsubscribeAll)).subscribe(t=>{t&&(this.page.items=t,this.elementPattern=t[0],this.page.data=JSON.parse(JSON.stringify(t)),this._changeDetectorRef.markForCheck())})}onSearch(t){this._settingsService.queryItems({query:t}).pipe((0,Z.R)(this._unsubscribeAll)).subscribe(o=>{o&&(this.page.data=JSON.parse(JSON.stringify(o)),this._changeDetectorRef.markForCheck())})}onImport(){const t=document.createElement("input");t.type="file",t.accept=".xlsx,.xls",t.click(),t.addEventListener("change",o=>{const a=o.target.files[0];a&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===a.type?this.readExcel(a):this._alert.open({type:"warn",message:"Please select a valid Excel file."})})}readExcel(t){var o=this;return U(function*(){try{const a=new D.Workbook;yield a.xlsx.load(t);let n=[];a.worksheets[0].eachRow((c,s)=>{const u=[];c.eachCell({includeEmpty:!0},(p,k)=>{let _=p.value;_&&_.richText&&(_=p.text),"string"==typeof _&&(_=_.replace(/\r\n$/,"").trim()),u.push(_)}),n.push(u)});const h=c=>n.every(s=>null===s[c]);if(n=n.map(c=>c.filter((s,u)=>!h(u))),0===n.length)return void o._alert.open({type:"warn",message:"The Excel has no data."});if("Enterprise Reliability Test Procedures"!==n[0][1])return void o._alert.open({type:"warn",duration:5,message:"The format of the Excel data is wrong, please confirm whether the correct template is used."});o.page.data=[];for(let c=0;c<n.length;c++){const s=n[c];c>1&&o.page.data.push({no:s[1].split(" ")[0],name:s[1],man_working_hours:parseFloat(s[2]).toFixed(2),equip_working_hours:parseFloat(s[3]).toFixed(2),order:c})}let m=[];if(o.page.data=o.page.data.reduceRight((c,s)=>{const u=c.find(p=>p.no===s.no);if(u){let p=m.find(k=>k.no===u.no);p?p.count++:m.push({no:u.no,count:1})}else c.unshift(s);return c},[]),m.length>0){let c="";for(let u of m)c+=`${u.no}&emsp; \u91cd\u8907: ${u.count}<br/>`;o._fuseConfirmationService.open({title:"Info",message:c,icon:{color:"info"},actions:{confirm:{color:"primary",label:"Continue"},cancel:{show:!1}}}).afterClosed().subscribe(u=>{"confirmed"===u&&o.save(o.page.data)})}else o.save(o.page.data)}catch{o._alert.open({type:"warn",duration:5,message:"The format of the Excel data is wrong, please confirm whether the correct template is used."})}})()}onChange(){}onDownload(){const t="nre_test_item_template.xlsx";fetch("assets/excel/"+t).then(a=>a.blob()).then(a=>{M.saveAs(a,t)})}onAdd(){let t={};for(let o in this.elementPattern)"id"!==o&&(t[o]=null);this.page.data.unshift(t)}onSave(){this.save(this.page.data)}save(t){this._settingsService.saveItems(t).subscribe({next:o=>{this.page.data=o,this._settingsService.items=o,this._alert.open({message:"Upload completed."}),this._changeDetectorRef.markForCheck()},error:o=>{console.log(o),this._fuseConfirmationService.open({title:"Error",message:JSON.stringify(o.message),actions:{confirm:{color:"warn",label:"OK"},cancel:{show:!1}}})}})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.QS),e.Y36(e.sBO),e.Y36(Q.R),e.Y36(B.g),e.Y36(J.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["default-items"]],decls:38,vars:7,consts:[[1,"w-full"],[1,"flex","flex-auto"],[1,"flex"],[1,"w-full","sm:w-80","fuse-mat-dense"],["matPrefix","","fontSet","material-icons-outlined"],["type","search","matInput","",3,"autocomplete","placeholder","keyup.enter"],["mat-flat-button","",1,"ml-3",3,"color","click"],[1,"icon-size-5","text-black",3,"svgIcon"],[1,"ml-2","mr-1"],[1,"ml-auto"],[1,"default-item-table"],["rowspan","2",1,"text-center"],["colspan","2"],[1,"text-center"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"px-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-icon",4),e._uU(5,"search"),e.qZA(),e.TgZ(6,"input",5),e.NdJ("keyup.enter",function(d){return o.onSearch(d.target.value)}),e.qZA()()(),e.TgZ(7,"div")(8,"button",6),e.NdJ("click",function(){return o.onDownload()}),e._UZ(9,"mat-icon",7),e.TgZ(10,"span",8),e._uU(11,"Download Template"),e.qZA()()(),e.TgZ(12,"div",9)(13,"button",6),e.NdJ("click",function(){return o.onImport()}),e._UZ(14,"mat-icon",7),e.TgZ(15,"span",8),e._uU(16,"Import"),e.qZA()()()(),e.TgZ(17,"table",10)(18,"thead")(19,"tr")(20,"th",11),e._uU(21,"NO"),e.qZA(),e.TgZ(22,"th",12),e._uU(23,"Enterprise Reliability Test Procedures"),e.qZA(),e.TgZ(24,"th",13),e._uU(25,"\u4eba\u529b\u5de5\u6642"),e.qZA(),e.TgZ(26,"th",13),e._uU(27,"\u8a2d\u5099\u5de5\u6642"),e.qZA()(),e.TgZ(28,"tr")(29,"th"),e._uU(30,"Item No"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"Minotaur SOW"),e.qZA(),e.TgZ(33,"th",13),e._uU(34,"(hr)"),e.qZA(),e.TgZ(35,"th",13),e._uU(36,"(hr)"),e.qZA()()(),e.YNc(37,ke,2,1,"tbody",14),e.qZA()()),2&t&&(e.xp6(6),e.Q6J("autocomplete","off")("placeholder","Search..."),e.xp6(2),e.Q6J("color","basic"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:arrow-down-tray"),e.xp6(4),e.Q6J("color","basic"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:arrow-up-tray"),e.xp6(23),e.Q6J("ngIf",o.page.data))},dependencies:[x.lW,f.KE,f.qo,y.Hw,C.Nt,g.sg,g.O5],styles:["table.default-item-table{width:100%;table-layout:auto;border-left-width:1px;--tw-border-opacity: 1;border-color:rgb(100 116 139 / var(--tw-border-opacity));border-collapse:separate;border-spacing:0}table.default-item-table thead{position:sticky;top:0;--tw-bg-opacity: 1;background-color:rgb(248 250 252 / var(--tw-bg-opacity))}table.default-item-table th{border-right-width:1px;border-bottom-width:1px;--tw-border-opacity: 1;border-color:rgb(100 116 139 / var(--tw-border-opacity));padding:.125rem}table.default-item-table tr:first-child th{border-top-width:1px}table.default-item-table td{border-bottom-width:1px;border-right-width:1px;--tw-border-opacity: 1;border-color:rgb(100 116 139 / var(--tw-border-opacity));padding:.125rem}table.default-item-table td .checkbox{margin-top:.25rem;height:1rem;width:1rem}table.default-item-table .edit{width:4.5rem;white-space:nowrap;--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity));text-align:center}table.default-item-table .edit input{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:center}table.default-item-table .view{text-align:center}\n"],encapsulation:2,changeDetection:0}),i})();const Te=["drawer"],Ze=function(i,r){return{"text-hint":i,"text-primary dark:text-primary-500":r}},Ce=function(i){return{"text-primary dark:text-primary-500":i}};function Ae(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19),e.NdJ("click",function(){const d=e.CHM(t).$implicit,n=e.oxw();return e.KtG(n.goToPanel(d.id))}),e._UZ(2,"mat-icon",20),e.TgZ(3,"div",21)(4,"div",22),e._uU(5),e.qZA(),e.TgZ(6,"div",23),e._uU(7),e.qZA()()(),e.BQk()}if(2&i){const t=r.$implicit,o=e.oxw();e.xp6(2),e.Q6J("ngClass",e.WLB(5,Ze,!o.selectedPanel||o.selectedPanel!==t.id,o.selectedPanel&&o.selectedPanel===t.id))("svgIcon",t.icon),e.xp6(2),e.Q6J("ngClass",e.VKq(8,Ce,o.selectedPanel&&o.selectedPanel===t.id)),e.xp6(1),e.hij(" ",t.title," "),e.xp6(2),e.hij(" ",t.description," ")}}function Ie(i,r){1&i&&(e.ynx(0),e._UZ(1,"default-items"),e.BQk())}function Se(i,r){1&i&&(e.ynx(0),e._UZ(1,"test-fee"),e.BQk())}function Re(i,r){1&i&&(e.ynx(0),e._UZ(1,"settings-account"),e.BQk())}let Fe=(()=>{class i{constructor(t,o){this._changeDetectorRef=t,this._fuseMediaWatcherService=o,this.drawerMode="side",this.drawerOpened=!0,this.panels=[],this.selectedPanel="default-items",this._unsubscribeAll=new A.x}ngOnInit(){this.panels=[{id:"default-items",icon:"",title:"\u4eba\u529b\u8a2d\u5099\u5de5\u6642",description:""},{id:"test-fee",title:"3rd party Test fee"},{id:"account",title:"Account Management"}],this._fuseMediaWatcherService.onMediaChange$.pipe((0,Z.R)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{t.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}goToPanel(t){this.selectedPanel=t,"over"===this.drawerMode&&this.drawer.close()}getPanelInfo(t){return this.panels.find(o=>o.id===t)}trackByFn(t,o){return o.id||t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(ae.T))},i.\u0275cmp=e.Xpm({type:i,selectors:[["settings"]],viewQuery:function(t,o){if(1&t&&e.Gf(Te,5),2&t){let a;e.iGM(a=e.CRH())&&(o.drawer=a.first)}},decls:23,vars:12,consts:[[1,"flex","flex-col","w-full","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"flex-auto","sm:h-full"],[1,"w-full","sm:w-96","dark:bg-gray-900","border-0",3,"autoFocus","mode","opened"],["drawer",""],[1,"flex","items-center","justify-between","m-8","mr-6","sm:my-10"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],[1,"lg:hidden"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"flex","flex-col"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-col","bg-card"],[1,"absolute","inset-0","flex","flex-auto","flex-col","min-w-0"],[1,"flex","items-center","px-6","pt-9"],["mat-icon-button","",1,"lg:hidden","-ml-2",3,"click"],[1,"ml-2","lg:ml-0","text-3xl","font-bold","tracking-tight","leading-none"],["cdkScrollable","",1,"mt-8","px-6","pb-12","overflow-y-auto"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"flex","px-8","py-5","cursor-pointer",3,"click"],[3,"ngClass","svgIcon"],[1,"ml-3"],[1,"font-medium","leading-6",3,"ngClass"],[1,"mt-0.5","text-secondary"]],template:function(t,o){if(1&t){const a=e.EpF();e.TgZ(0,"div",0)(1,"mat-drawer-container",1)(2,"mat-drawer",2,3)(4,"div",4),e._UZ(5,"div",5),e.TgZ(6,"div",6)(7,"button",7),e.NdJ("click",function(){e.CHM(a);const n=e.MAs(3);return e.KtG(n.close())}),e._UZ(8,"mat-icon",8),e.qZA()()(),e.TgZ(9,"div",9),e.YNc(10,Ae,8,10,"ng-container",10),e.qZA()(),e.TgZ(11,"mat-drawer-content",11)(12,"div",12)(13,"div",13)(14,"button",14),e.NdJ("click",function(){e.CHM(a);const n=e.MAs(3);return e.KtG(n.toggle())}),e._UZ(15,"mat-icon",8),e.qZA(),e.TgZ(16,"div",15),e._uU(17),e.qZA()(),e.TgZ(18,"div",16),e.ynx(19,17),e.YNc(20,Ie,2,0,"ng-container",18),e.YNc(21,Se,2,0,"ng-container",18),e.YNc(22,Re,2,0,"ng-container",18),e.BQk(),e.qZA()()()()()}2&t&&(e.xp6(2),e.Q6J("autoFocus",!1)("mode",o.drawerMode)("opened",o.drawerOpened),e.xp6(6),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(2),e.Q6J("ngForOf",o.panels)("ngForTrackBy",o.trackByFn),e.xp6(5),e.Q6J("svgIcon","heroicons_outline:menu"),e.xp6(2),e.hij(" ",o.getPanelInfo(o.selectedPanel).title," "),e.xp6(2),e.Q6J("ngSwitch",o.selectedPanel),e.xp6(1),e.Q6J("ngSwitchCase","default-items"),e.xp6(1),e.Q6J("ngSwitchCase","test-fee"),e.xp6(1),e.Q6J("ngSwitchCase","account"))},dependencies:[x.RK,y.Hw,re.PQ,T.jA,T.kh,T.LW,g.mk,g.sg,g.RF,g.n9,de,xe,we],encapsulation:2,changeDetection:0}),i})(),qe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[N.Bz.forChild([{path:"",component:Fe}]),x.ot,f.lN,y.Ps,C.c,ee,w.LD,T.SJ,te.rP,oe.fC,ie.m]}),i})()}}]);